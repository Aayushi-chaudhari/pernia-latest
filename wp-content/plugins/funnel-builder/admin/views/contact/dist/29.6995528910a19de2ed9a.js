(window.webpackJsonp=window.webpackJsonp||[]).push([[29,9,39],{1128:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(119),c=n(2),l=n(25),o=n(13),i=n.n(o),s=n(9),u=n(1),b=(n(552),n(4)),f=n(7),d=n.n(f),m=n(8),p=n(315),O=n(29),j=n(30),v=n(76),y=n(248),w=n(50),g=n(303),h=n(14),_=n(435),E=n(35),S=n(52),k=n(22);function N(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=Object(a.useParams)(),n=t.id,c=t.builder,l=e.query,o=e.isOpen,f=e.setModalOpenState,m=e.hasCheckoutStep,w=e.funnelId,P=void 0===w?n:w,A=l.importType,T="wc_checkout"===A?"funnel":A,I=j.a.getAddStepData(),D=Object(O.a)(),B=D.addStep,F=D.addSubStep,L=D.endAddStep,z=D.updateFunnelViewLink,M=D.setCountData,U=D.fetch,R=Object(v.a)(),q=R.setActiveGroup,J=R.setActiveBuilder,Y=R.setActiveSubFilter,$=(0,Object(y.a)().getActiveGroup)(),Q=Object(E.a)().getStatus,H=Object(S.a)().updateStatus,G=Q(),V=x(Object(r.useState)(null),2),W=V[0],K=V[1],X=l.path.startsWith("/store-checkout"),Z=(0,Object(k.a)().getGlobalCheckout)(),ee=("object"===C(Z)?Z:{}).funnel_id,te=void 0===ee?0:ee,ne=!!c||!!T,re=function(){f(!1),W&&K(null)};Object(r.useEffect)((function(){return function(){L()}}),[]),Object(r.useEffect)((function(){return I&&"type"in I&&(K(I),f(!0)),function(){re()}}),[I]);var ae=function(e,t){var n=W.is_substep,r=W.type,a=W.parent_id;e.status&&"data"in e&&(n?e.data&&(F(e.data,r,parseInt(a),!!t),Object(h.k)({},"".concat(Object(b.Y)()?"/store-checkout/bump":"/funnel-bump","/").concat(e.data.id).concat(t?"/design":"/import","&funnel_id=").concat(P))):B(e.data))},ce=x(Object(r.useState)(!1),2),le=ce[0],oe=ce[1],ie=x(Object(r.useState)(null),2),se=ie[0],ue=ie[1],be=x(Object(r.useState)(!1),2),fe=be[0],de=be[1],me=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a,c,l,o,s,u,f,d,m,p,O,j,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le){e.next=2;break}return e.abrupt("return");case 2:return de(!0),oe(!0),n=W.type,r=void 0===n?"":n,a=W.parent_id,c=void 0===a?0:a,l=W.is_substep,o=void 0!==l&&l,s=t.copyFrom,u=void 0===s?{}:s,f=t.title,d=void 0===f?"":f,(m=u&&u.hasOwnProperty("key")?u.key:0)<1&&(m=u&&u.hasOwnProperty("id")?u.id:0),p="",o&&parseInt(c)>0&&(p="".concat(c,"/substeps/")),Object(b.Y)()&&"wc_order_bump"===r&&(p="".concat(c,"/substeps/")),O="",O="offer"==r?"/funnel-upsell/".concat(c,"/offers"):"/funnels/".concat(P,"/steps/").concat(p),Object(b.Y)()&&(O="/store-checkout/".concat(P,"/step/").concat(p)),j={title:d,inherit_from:m,type:r},e.prev=16,e.next=19,i()({method:"POST",path:Object(b.p)(O),data:j});case 19:(v=e.sent).hasOwnProperty("status")&&v.status?ye():ue(!1),v.hasOwnProperty("status")&&v.status&&ae(v,m),z(),v.hasOwnProperty("count_data")&&M(v.count_data),p&&"wc_order_bump"===r&&!G.is_orderbump&&H({is_orderbump:!0}),oe(!1),pe(!1),e.next=37;break;case 29:e.prev=29,e.t0=e.catch(16),console.log("Error While Creating Step: "),console.log(e.t0),ue(!1),z(),oe(!1),pe(!1);case 37:case"end":return e.stop()}}),e,null,[[16,29]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){N(c,r,a,l,o,"next",e)}function o(e){N(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){K(null),L(),de(!1),ue(null),f(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t()},Oe=(W||{}).is_substep,je=!fe&&W&&!(void 0!==Oe&&Oe)&&Object(r.createElement)(s.Button,{icon:"arrow-left-alt wffn-icon",onClick:function(){return K(null)}}),ve=Object(r.createElement)(r.Fragment,null,je,W&&"wc_order_bump"===W.type?Object(u.__)("Add Order Bump","funnel-builder"):W&&"popup_title"in W?W.popup_title:"funnel"===T?X?Object(u.__)("Create Store Checkout","funnel-builder"):Object(u.__)("Funnel Templates","funnel-builder"):Object(u.__)("Add Step","funnel-builder"));Object(r.useEffect)((function(){W||!o&&!ne||"upsell"!==$&&(!T&&!X||c?c||q("landing"):"step"===T?q("wc_checkout"):"funnel"===T&&q("funnel"))}),[o,ne]);var ye=function(){delete l.importType,delete l.group,J(""),q("funnel"),Y(!1),re(),Object(h.k)({},Object(h.g)(),l)};return Object(r.createElement)(r.Fragment,null,(o||ne)&&Object(r.createElement)(s.Modal,{title:ve,onRequestClose:function(){W&&pe(),ye(),Object(b.Y)()?Object(h.k)({},"/store-checkout"):Object(h.k)({},"/funnels/".concat(P))},className:d()("bwf-admin-modal",{"bwf-admin-modal-full-screen bwf-add-step-modal":!W,"bwf-admin-modal-squeezy bwf-modal-overflow-visible":W}),shouldCloseOnClickOutside:W&&!le,overlayClassName:"wffn_step_template_modal"},!fe&&!W&&T&&("funnel"===T?Object(r.createElement)(_.default,{onImportComplete:function(){ye(),X?(U(parseInt(te)),Object(h.k)({},"/store-checkout")):(U(parseInt(P)),Object(h.k)({},"/funnels/".concat(P)))},isStoreCheckout:X,storeCheckoutId:te}):Object(r.createElement)(g.a,{onImportComplete:function(){ye(),X?(U(parseInt(te)),Object(h.k)({},"/store-checkout")):(U(parseInt(P)),Object(h.k)({},"/funnels/".concat(P)))},isStoreCheckout:X,storeCheckoutId:te,hasCheckoutStep:m})),W&&Object(r.createElement)(p.a,{step:W,requestCreateStep:me,onRequestClose:re,onCreationScreen:fe,clearAndCloseEverything:pe,creationSuccess:se,isBusy:le})))},T=n(21);function I(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.funnelId,n=void 0===t?0:t,a=Object(T.b)().showSnackbar,c=j.a.getDuplicateStepData(),l=c.step,o=c.stepPos,f=c.shouldDuplicate,d=c.substepOf,m=void 0===d?null:d,p=D(Object(r.useState)(!1),2),v=p[0],y=p[1],g=D(Object(r.useState)(null),2),h=g[0],_=g[1],E=D(Object(r.useState)(null),2),S=E[0],k=E[1],N=Object(O.a)(),C=N.addStep,x=N.addSubStep,P=N.endDuplicateStep,A=N.setCountData,B=function(){var e=setTimeout((function(){P(),clearTimeout(e)}),2e3)},F=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,t=m&&"id"in m?"".concat(m.id,"/substeps/"):"",r="/funnels/".concat(n,"/steps/").concat(t),"offer"===l.type&&m&&"id"in m&&(r="/funnel-upsell/".concat(m.id,"/offers/")),e.next=7,i()({method:"POST",path:Object(b.p)(r),data:{duplicate_id:l.id,type:l.type}});case 7:"status"in(c=e.sent)&&c.status?(m&&"id"in m?x(c.data,l.type,m.id,!0):C(c.data,o),_(null),P(),c.hasOwnProperty("count_data")&&A(c.count_data),a(Object(u.__)("Changes Saved","funnel-builder"))):(k({message:Object(u.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),_(!1)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),k(e.t0),_(!1);case 16:y(!1),B();case 18:case"end":return e.stop()}}),e,null,[[1,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){I(c,r,a,l,o,"next",e)}function o(e){I(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(null),l&&F()}),[l]),f?Object(r.createElement)(s.Modal,{isDismissible:!1,title:!1===h?Object(u.__)("Failed"):"",onRequestClose:P,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},v&&Object(r.createElement)("div",{className:"bwf-t-center bwf-mt-10"},Object(r.createElement)(w.a,{size:"xxl"}),Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(u.__)("Please waitâ€¦","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(u.__)("We are duplicating step in the funnel","funnel-builder"))),!v&&!0===h&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!v&&!0===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(u.__)("Step Duplicated","funnel-builder")))),!v&&!1===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:""},Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Error: ","funnel-builder")+S&&"message"in S?S.message:Object(u.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")))),!v&&!1===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:P},Object(u.__)("OK","funnel-builder"))))):null},L=n(154),z=n(266),M=n(60),U=n(28),R=n(32);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t=e.type,n=void 0===t?"upsell":t,a=e.onClick,c=e.modalContent,l=q(Object(r.useState)(!1),2),o=l[0],s=l[1],f=(Object(O.a)().setShowAddStepModal,Object(v.a)().setActiveGroup),p=Object(U.a)().setStepPromotion;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:d()("bwf-st-c-wrap bwf-st-c__lite-card",["bwf-st-lite-".concat(n)])},Object(r.createElement)("div",{className:"bwf-st-c",onClick:function(){return s(!0)}},Object(r.createElement)("span",{className:"bwf-d-icon-drag",style:{marginTop:"2px"}},Object(r.createElement)(m.a,{icon:"king",color:R.NOTICE_YELLOW,size:20})),Object(r.createElement)("div",{className:"bwf-st-c-title",style:{marginLeft:"-3px"}},Object(r.createElement)("a",{href:"#",onClick:function(e){return e.preventDefault()}},"upsell"===n?Object(u.__)("One Click Upsell Offer","funnel-builder"):Object(u.__)("Order Bump","funnel-builder")),Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-ml-12"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-has-chart bwf-st-c-badge-small bwf-st-c-badge-green bwf-cursor-text"},Object(r.createElement)(m.a,{icon:"chart-increase",width:"14",height:"14",color:"#09B29C"}),Object(r.createElement)("span",null,Object(u.__)("Increases average order value","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("div",{className:"bwf-card-action",onClick:function(){"upsell"===n?(Object(h.k)({importType:"step"}),f("upsell")):a&&a()},role:"button",tabIndex:"-1"},Object(u.__)("View Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-card-action bwf-close-icon",onClick:function(e){var t;e.stopPropagation(),t="/".concat("upsell"===n?"remove-upsell-promotion":"remove-bump-promotion"),p("yes","upsell"===n?"upsell":"bump"),i()({path:Object(b.p)(t),method:"POST",data:{user_id:wffn.current_logged_user}}).then((function(e){e.status||console.log("Failed to remove step promotion.")})).catch((function(e){return console.log(e)}))}},Object(r.createElement)(m.a,{icon:"close",size:12}))))),o&&Object(r.createElement)(M.a,{isOpen:o,onRequestClose:function(){return s(!1)},modalContent:c}))},$=n(37),Q=n(41),H=n(108),G=n(79),V=n(169),W=n(26),K=n(125),X=n(127),Z=n(126),ee=n(74),te=n(62),ne=n(40),re=n(81),ae=n(55);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=window.wffn.is_ab_experiment,be=window.wffn.is_ab_experiment_support,fe={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.I)()+"AB-testing.png",proLink:Object(b.J)(["Order","Bump","AB_Test","Upgrade","Modal"])},de={type:2,status:!0,proLink:Object(b.J)(["Order","Bump","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},me=function(e){var t,n,a,o=e.bump,f=o._data,p=void 0===f?{}:f,v=o.tags,y=o.experiment_status,w=(o.type,e.bump),g=e.checkoutStep,_=e.checkoutPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,C=p.title,x=p.status,P=Object(b.y)(),A=j.a.getFunnel(),I=w.id,D=void 0===I?"":I,B=Object(te.a)().setModalData,F=ie(Object(r.useState)(!1),2),L=F[0],z=F[1],U=ie(Object(r.useState)({}),2),q=U[0],J=U[1],Y=ie(Object(r.useState)(!1),2),ce=Y[0],oe=Y[1],se=ie(Object(r.useState)(!1),2),me=se[0],pe=se[1],Oe=ie(Object(r.useState)(!1),2),je=Oe[0],ve=Oe[1],ye=ie(Object(r.useState)(!1),2),we=ye[0],ge=ye[1],he=ie(Object(r.useState)(!1),2),_e=he[0],Ee=he[1],Se=ie(Object(r.useState)({}),2),ke=Se[0],Ne=Se[1],Ce=Object(O.a)(),xe=Ce.startDuplicateStep,Pe=Ce.startDeleteStep,Ae=Ce.setStepTitle,Te=Ce.setUpdateFunnel,Ie=Object(ne.a)(),De=Ie.setToggleState,Be=Ie.setSubStep,Fe=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Le=Object(T.b)().showSnackbar,ze=Object(re.a)().setExperimentStatus,Me=Object(ae.a)().setStepHeaderData,Ue=function(){if(w.hasOwnProperty("id")&&w.id){Ae(Object($.decodeEntities)(C)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(P,"/experiments/").concat(w.id);Object(b.Y)()&&(e="/store-checkout/experiments/".concat(w.id)),Object(h.k)({},e)}},Re=function(e){Ee(!0);var t="/funnel-bump/save-state/".concat(w.id,"?funnel_id=").concat(P);i()({path:Object(b.p)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(De(!Number(x)),Ee(!1),ge(!1),ve(!1),function(e,t){var n=Object(c.cloneDeep)(null==A?void 0:A.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.wc_order_bump=n.substeps.wc_order_bump.map((function(n){return parseInt(n.id)===parseInt(D)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(Number(x),e),Ne({}),Le(Object(u.__)("Changes Saved","funnel-builder"))):(De(Number(x)),Ee(!1),ge(!1),ve(!1))})).catch((function(e){console.log(e),De(Number(x)),Le(Object(u.__)("Status Updation Failed","funnel-builder"))}))},qe={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},Je={1:"warning",2:"success",3:"default"},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Je[e]:qe[e]},$e=function(e){if(pe(!0),(e=e.trim())===C)oe(!1),pe(!1);else if(C!==e.trim()){Ae(e);var t='{"title":"'.concat(e,'","slug":"').concat(S.match(/([^\/]*)\/*$/)[1],'"}');i()({path:Object(b.p)("/funnel-bump/save-state/".concat(w.id,"?funnel_id=").concat(P)),data:JSON.parse(t),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);oe(!1),pe(!1),Le(Object(u.__)("Changes Saved","funnel-builder")),function(e,t){var n=A.steps.map((function(n){if(n.id===e){var r=n.substeps.wc_order_bump.map((function(e){if(e.id===w.id){var n=le(le({},e._data),{},{title:t});return le(le({},e),{},{_data:n})}return e}));return n.substeps.wc_order_bump=r,n}return n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(e.step_data.checkout_id,e.step_data.title)})).catch((function(e){console.log(e.message?e.message:e),Ae(C),Le(Object(u.__)("Title Updation Failed","funnel-builder"))}))}},Qe=Object(T.a)(),He=Qe.isExpired,Ge=Qe.isProFeatureLocked;return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:Object(u.__)("Click here to move up","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:Object(u.__)("Click here to move down","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.P)(P,"order_bump",g.id,w.id),onClick:function(e){e.preventDefault(),Me("bump",D,"",{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(h.k)({page:"bwf",path:Object(b.P)(P,"order_bump",g.id,w.id,!1)},"/",{})}},Object($.decodeEntities)(C))),He?Object(r.createElement)(W.b,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"!==e&&"has_rules"!==e||(Me("bump",D,"",{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(h.k)({},v[e].edit,Fe))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(c.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){ue&&!Ge?be?(ze(y),Be({step:"bump",parentId:g.id}),Ue()):z(!0):J(fe)}},Object(r.createElement)(W.b,{content:(t=y,a="warning"===(n=Ye(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{fill:a}),Object(r.createElement)("span",{className:"".concat(void 0!==a?"bwf-mr-4":"")},Ye(t)))),type:Ye(y,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!Ge&&ue?be?(ze(y),Be({step:"bump",parentId:g.id}),Ue()):z(!0):J(fe)},title:Object(u.__)("A/B Test Step","funnel-builder"),className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:Ge?"king":"experiment",width:"16",height:"16",color:Ge?R.NOTICE_YELLOW:R.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:S,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),oe(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ne({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(C)),"funnel-builder")))}),Re()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?ve(!0):ge(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){Ge?J(de):(t(),xe(le(le({},w),{},{type:"wc_order_bump"}),0,g))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),Ge&&Object(r.createElement)(Q.c,null,Object(r.createElement)(W.a,null)))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),B({title:C}),Pe(le(le({},w),{},{type:"wc_order_bump"}),E,le(le({},g),{},{stepPos:_}))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(u.__)("Order Bump","funnel-builder"),className:"bwf-cursor-default"})))),L&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"})),q.status&&Object(r.createElement)(M.a,{isOpen:q.status,onRequestClose:function(){return J({status:!1})},modalContent:q,type:q.type}),ce&&Object(r.createElement)(V.a,{renameTitle:"Edit Details",title:Object($.decodeEntities)(C),onclose:function(){return oe(!1)},updateTitle:function(e){return $e(e)},isLoading:me}),we&&Object(r.createElement)(Z.a,{isPublishLoading:_e,onAction:function(){return Re()},onclose:function(){return ge(!1)}}),je&&Object(r.createElement)(X.a,{isPublishLoading:_e,onAction:function(){Re(!0)},onclose:function(){return ve(!1)}}),Object(r.createElement)(ee.a,{className:d()("bwf-admin-modal-squeezy",ke.className),confirmText:ke.confirmText,confirmButtonText:ke.buttonConfirm,cancelButtonText:ke.buttonCancel,onConfirm:ke.onConfirm,isLoading:ke.loading,successMessage:ke.success,errorMessage:ke.error,content:ke.content,onRequestClose:function(){return Ne({status:!1})},modalTitle:ke.modalTitle,isOpen:ke.status,closeIcon:ke.closeIcon}))},pe=n(358),Oe=n(316);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=window.wffn.is_ab_experiment,_e=window.wffn.is_ab_experiment_support,Ee={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("A/B test product price, page layout, messaging, design & more. Create variants, analyze results & uncover hidden revenue.","funnel-builder")]},image:Object(b.I)()+"AB-testing.png",proLink:Object(b.J)(["Checkout","AB_Test","Upgrade","Modal"])},Se={type:2,status:!0,proLink:Object(b.J)(["Checkout","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},ke={bump:!0},Ne=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,a=void 0===n?{}:n,o=t.tags,f=void 0===o?[]:o,p=(t.experiment,t.substeps),v=(p=void 0===p?{}:p).wc_order_bump,y=void 0===v?[]:v,w=t.id,g=void 0===w?0:w,_=t.experiment_status,E=t.type,S=e.step,N=e.stepPos,C=void 0===N?0:N,x=(e.title,e.isOBFake),P=Object(T.b)().showSnackbar,A=j.a.getFunnel(),I=Object(ae.a)().setStepHeaderData,D=Object(b.y)(),B=we(Object(r.useState)({}),2),F=B[0],L=B[1],z=a.title,U=a.view,q=a.status,J=void 0===q?0:q,V=Object(te.a)().setModalData,ce=Object(O.a)(),le=ce.startDuplicateStep,oe=ce.startDeleteStep,ie=ce.startAddStep,se=ce.setShowProModal,ue=ce.setShowProModalText,be=ce.setStepTitle,fe=(ce.fetch,ce.sortSubSteps),de=ce.setUpdateFunnel,je=Object(ne.a)(),ye=je.setToggleState,ge=(je.setStepData,Object(re.a)().setExperimentStatus),Ne=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Ce=(0,Object(k.a)().getGlobalCheckout)(),xe=Ce&&Ce.checkout_id&&Number(Ce.checkout_id)===S.id,Pe=we(Object(r.useState)(f),2),Ae=Pe[0],Te=Pe[1],Ie=we(Object(r.useState)(!1),2),De=Ie[0],Be=Ie[1],Fe=we(Object(r.useState)(!1),2),Le=Fe[0],ze=Fe[1],Me=we(Object(r.useState)(!1),2),Ue=Me[0],Re=Me[1],qe=we(Object(r.useState)(!1),2),Je=qe[0],Ye=qe[1],$e=we(Object(r.useState)(!1),2),Qe=$e[0],He=$e[1],Ge=we(Object(r.useState)(!1),2),Ve=Ge[0],We=Ge[1],Ke=we(Object(r.useState)({}),2),Xe=Ke[0],Ze=Ke[1];Object(r.useEffect)((function(){0!==Object(c.size)(y)||"no_bump"in f||Te(ve(ve({},Ae),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[y.length]);var et,tt,nt,rt=Object(b.U)("wc_order_bump"),at={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},ct={1:"warning",2:"success",3:"default"},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?ct[e]:at[e]},ot=function(e){null!==rt&&ie(ve(ve({},rt),{},{parent_id:parseInt(g),is_substep:!0,title:"Order Bump"})),!rt&&se(!0),!rt&&ue(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},it=function(){if(g){be(Object($.decodeEntities)(z)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(D,"/experiments/").concat(g);Object(b.Y)()&&(e="/store-checkout/experiments/".concat(g)),Object(h.k)({},e)}},st=function(e){We(!0);var t="/funnel-".concat(E,"/save-state/").concat(g,"?funnel_id=").concat(D);i()({path:Object(b.p)(t),method:"POST",data:{status:!Number(J)}}).then((function(t){t.success?(ye(!Number(J)),We(!1),He(!1),Ye(!1),function(e,t){var n=null==A?void 0:A.steps.map((function(n){if(n.id===g){var r=ve(ve({},n._data),{},{status:e?"1":"0"});return ve(ve({},n),{},{_data:r,experiment_status:t?"3":n.experiment_status})}return n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));de(r)}(Number(t.step_data.status),e),Ze({}),P(Object(u.__)("Changes Saved","funnel-builder"))):(ye(Number(J)),We(!1),He(!1),Ye(!1))})).catch((function(e){console.log(e),ye(Number(J)),P("Status Updation Failed")}))},ut=function(e,t){var n=[];"up"===e?n=fe(g,"wc_order_bump",t,t-1):"down"===e&&(n=fe(g,"wc_order_bump",t,t+1)),i()({path:Object(b.p)("/funnels/steps/order/save/".concat(g,"?type=wc_order_bump")),method:"POST",data:{order:n.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))},bt=function(e,t){if(Re(!0),(e=e.trim())===z&&(null==a?void 0:a.post_name)===t)ze(!1),Re(!1);else{be(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');i()({path:Object(b.p)("/funnel-".concat(E,"/save-state/").concat(g,"?funnel_id=").concat(D)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);ze(!1),Re(!1),function(e,t,n){var r=A.steps.map((function(r){return r.id===Number(g)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));A.steps=r;var a=JSON.parse(JSON.stringify(A));de(a)}(e.step_data.title,t,e.step_data.view_link),P(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),be(z),P(Object(u.__)("Title Updation Failed","funnel-builder"))}))}},ft=Object(T.a)(),dt=(ft.isExpired,ft.isProFeatureLocked);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.P)(D,"wc_checkout",S.id),onClick:function(e){e.preventDefault(),I("checkout",g,"",{title:z,view_link:U,status:1===Number(J),experiment_status:_}),Object(h.k)({page:"bwf",path:Object(b.P)(D,"wc_checkout",S.id,"",!1)},"/",{})}},Object($.decodeEntities)(z),"â€‚")),Object(c.size)(f)>0&&Object.keys(Ae).map((function(e){return("no_bump"!==e||0===Object(c.size)(y))&&"global_checkout"!==e&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e?(I("checkout",g,"",{title:z,view_link:U,status:1===Number(J),experiment_status:_}),Object(h.k)({},Ae[e].edit,Ne)):"no_bump"===e&&(dt?L(ke):ot(t))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+Ae[e].label_class},Ae[e].label))})),xe&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-cursor-text"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-yellow"},Object(u.__)("Global Checkout","funnel-builder"))),!Object(c.isEmpty)(_)&&"4"!==_&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){he&&!dt?_e?(ge(_),it()):Be(!0):L(Ee)}},Object(r.createElement)(W.b,{content:(et=_,nt="warning"===(tt=lt(_,!0))?"#B68F40":"success"===tt?"#09B29C":"default"===tt?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{fill:nt}),Object(r.createElement)("span",{className:"".concat(void 0!==nt?"bwf-mr-4":"")},lt(et)))),type:lt(_,!0)})),!(J&&1===parseInt(J))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(u.__)("Draft","funnel-builder"),className:"bwf-cursor-default",type:"warning"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!dt&&he?_e?(ge(_),it()):Be(!0):L(Ee)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:dt?"king":"experiment",width:"16",height:"16",color:dt?R.NOTICE_YELLOW:R.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object($.decodeEntities)(U),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),ze(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(J&&1===parseInt(J))&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ze({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(z)),"funnel-builder")))}),st()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(J)&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(_)?Ye(!0):He(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),!Object(b.Y)()&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){dt?L(Se):(t(),le(S,C+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),dt&&Object(r.createElement)(Q.c,null,Object(r.createElement)(W.a,null)))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),V({title:z}),oe(S,C)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!dt})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{className:"bwf-cursor-default",content:Object(b.eb)(E)}))),F.status&&Object(r.createElement)(M.a,{isOpen:F.status,onRequestClose:function(){return L({status:!1})},modalContent:F,type:F.type}),De&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return Be(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return Be(!1)}},Object(u.__)("OK","funnel-builder")))),null!==rt&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(y)>0&&y.map((function(e,t){return Object(r.createElement)(me,{key:t,bump:e,checkoutStep:S,checkoutPos:C,stepPos:t,total:Object(c.size)(y),view:Object($.decodeEntities)(U),onSortStart:ut})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){dt?L(ke):ot(e)}},dt&&Object(r.createElement)(m.a,{icon:"king",color:R.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),x&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(Y,{type:"order_bump",onClick:function(){return se(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Boost your sales effortlessly with the Order Bumps. Let users add products with just one click on checkout page.","funnel-builder")]},image:Object(b.I)()+"order-bump.png",proLink:Object(b.J)(["Order","Bump","Upgrade","Modal"])}}))),Le&&Object(r.createElement)(pe.a,{pageUrl:null==a?void 0:a.view_link,pageUrlSlug:null==a?void 0:a.post_name,renameTitle:"Step",title:Object($.decodeEntities)(z),onclose:function(){return ze(!1)},updateDetail:function(e,t){return bt(e,t)},isLoading:Ue}),Qe&&Object(r.createElement)(Z.a,{isPublishLoading:Ve,onAction:function(){return st()},onclose:function(){return He(!1)}}),Je&&Object(r.createElement)(X.a,{isPublishLoading:Ve,onAction:function(){st(!0)},onclose:function(){return Ye(!1)}}),F.bump&&Object(r.createElement)(Oe.a,{isOpen:F.bump,onRequestClose:function(){return L({status:!1})}}),Object(r.createElement)(ee.a,{className:d()("bwf-admin-modal-squeezy",Xe.className),confirmText:Xe.confirmText,confirmButtonText:Xe.buttonConfirm,cancelButtonText:Xe.buttonCancel,onConfirm:Xe.onConfirm,isLoading:Xe.loading,successMessage:Xe.success,errorMessage:Xe.error,content:Xe.content,onRequestClose:function(){return Ze({status:!1})},modalTitle:Xe.modalTitle,isOpen:Xe.status,closeIcon:Xe.closeIcon}))};function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=window.wffn.is_ab_experiment,De=window.wffn.is_ab_experiment_support,Be={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.I)()+"AB-testing.png",proLink:Object(b.J)(["Offer","AB_Test","Upgrade","Modal"])},Fe={type:2,status:!0,proLink:Object(b.J)(["Offer","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},Le=function(e){var t,n,a,o=e.offer,f=o._data,p=void 0===f?{}:f,v=o.tags,y=(o.experiment,o.experiment_status),w=e.offer,g=e.upsellStep,_=e.upsellPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,C=p.title,x=p.status,P=w.id,A=void 0===P?"":P,I=Object(b.y)(),D=j.a.getFunnel(),B=Object(te.a)().setModalData,F=Ae(Object(r.useState)(!1),2),L=F[0],z=F[1],U=Ae(Object(r.useState)({}),2),q=U[0],J=U[1],Y=Ae(Object(r.useState)(!1),2),V=Y[0],ce=Y[1],le=Ae(Object(r.useState)(!1),2),oe=le[0],ie=le[1],se=Ae(Object(r.useState)(!1),2),ue=se[0],be=se[1],fe=Ae(Object(r.useState)(!1),2),de=fe[0],me=fe[1],Oe=Ae(Object(r.useState)(!1),2),je=Oe[0],ve=Oe[1],ye=Ae(Object(r.useState)({}),2),we=ye[0],ge=ye[1],he=Object(T.a)("ul").isExpired,_e=Object(T.a)().isProFeatureLocked,Ee=Object(O.a)(),Se=Ee.startDuplicateStep,ke=Ee.startDeleteStep,Ne=Ee.setStepTitle,Ce=Ee.setUpdateFunnel,Pe=Object(ne.a)(),Te=Pe.setToggleState,Le=Pe.setSubStep,ze=Object(re.a)().setExperimentStatus,Me=Object(ae.a)().setStepHeaderData,Ue=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Re=Object(T.b)().showSnackbar,qe=function(){if(w.hasOwnProperty("id")&&w.id){Ne(Object($.decodeEntities)(C)+Object(u.__)(" A/B Test"));var e="/funnels/".concat(I,"/experiments/").concat(w.id);Object(b.Y)()&&(e="/store-checkout/experiments/".concat(w.id)),Object(h.k)({},e)}},Je={1:Object(u.__)("A/B Test Draft"),2:Object(u.__)("A/B Test Running"),3:Object(u.__)("A/B Test Paused")},Ye={1:"warning",2:"success",3:"default"},$e=function(e){ve(!0);var t="/funnel-".concat("offer","/save-state/",w.id,"?funnel_id=").concat(I);i()({path:Object(b.p)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Te(!Number(x)),ve(!1),me(!1),be(!1),function(e,t){var n=Object(c.cloneDeep)(null==D?void 0:D.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.offer=n.substeps.offer.map((function(n){return parseInt(n.id)===parseInt(A)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));D.steps=n;var r=JSON.parse(JSON.stringify(D));Ce(r)}(Number(x),e),ge({}),Re(Object(u.__)("Changes Saved","funnel-builder"))):(Te(Number(x)),ve(!1),me(!1),be(!1))})).catch((function(e){console.log(e),Te(Number(x)),Re("Status Updation Failed")}))},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ye[e]:Je[e]},He=function(e,t){if(ie(!0),(e=e.trim())===C&&(null==p?void 0:p.post_name)===t)ce(!1),ie(!1);else{Ne(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');i()({path:Object(b.p)("/funnel-".concat("offer","/save-state/",w.id,"?funnel_id=").concat(I)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);ce(!1),ie(!1),function(e,t,n,r){var a=D.steps.map((function(a){if(a.id===Number(e)){var c=a.substeps.offer.map((function(e){if(e.id===w.id){var a=xe(xe({},e._data),{},{title:t,post_name:n,view_link:r});return xe(xe({},e),{},{_data:a})}return e}));return a.substeps.offer=c,a}return a}));D.steps=a;var c=JSON.parse(JSON.stringify(D));Ce(c)}(e.step_data.upsell_id,e.step_data.title,t,e.step_data.view_link),Re(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Ne(C),Re("Title Updation Failed")}))}};return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:"Click here to move up"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:"Click here to move down"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.P)(I,"offer",g.id,w.id),onClick:function(e){e.preventDefault(),Me("offer",A,A,{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(h.k)({page:"bwf",path:Object(b.P)(I,"offer",g.id,w.id,!1)},"/",{})}},Object($.decodeEntities)(C))),he?Object(r.createElement)(W.b,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"===e&&(Me("offer",A,A,{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(h.k)({},v[e].edit,Ue))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(c.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Ie&&!_e?De?(Le({step:"offer",parentId:g.id}),ze(y),qe()):z(!0):J(Be)}},Object(r.createElement)(W.b,{content:(t=y,a="warning"===(n=Qe(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{fill:a}),Object(r.createElement)("span",{className:"".concat(void 0!==a?"bwf-mr-4":"")},Qe(t)))),type:Qe(y,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!_e&&Ie?(ze(y),De?(Le({step:"offer",parentId:g.id}),qe()):z(!0)):J(Be)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:_e?"king":"experiment",width:"16",height:"16",color:_e?R.NOTICE_YELLOW:R.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:null==p?void 0:p.view,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),ce(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),function(){try{ge({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(C)),"funnel-builder")))}),$e()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?be(!0):me(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){_e?J(Fe):(t(),Se(xe(xe({},w),{},{type:"offer"}),0,g))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),_e&&Object(r.createElement)(Q.c,null,Object(r.createElement)(W.a,null)))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),B({title:C}),ke(xe(xe({},w),{},{type:"offer"}),E,xe(xe({},g),{},{stepPos:_}))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(b.eb)("offer"),className:"bwf-cursor-default"}))),L&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel."))),Object(r.createElement)("div",{className:"bwf_clear_30"})),q.status&&Object(r.createElement)(M.a,{isOpen:q.status,onRequestClose:function(){return J({status:!1})},modalContent:q,type:q.type}),V&&Object(r.createElement)(pe.a,{pageUrl:null==p?void 0:p.view_link,pageUrlSlug:null==p?void 0:p.post_name,renameTitle:"Step",title:Object($.decodeEntities)(C),onclose:function(){return ce(!1)},updateDetail:function(e,t){return He(e,t)},isLoading:oe}),de&&Object(r.createElement)(Z.a,{isPublishLoading:je,onAction:function(){return $e()},onclose:function(){return me(!1)}}),ue&&Object(r.createElement)(X.a,{isPublishLoading:je,onAction:function(){$e(!0)},onclose:function(){return be(!1)}}),Object(r.createElement)(ee.a,{className:d()("bwf-admin-modal-squeezy",we.className),confirmText:we.confirmText,confirmButtonText:we.buttonConfirm,cancelButtonText:we.buttonCancel,onConfirm:we.onConfirm,isLoading:we.loading,successMessage:we.success,errorMessage:we.error,content:we.content,onRequestClose:function(){return ge({status:!1})},modalTitle:we.modalTitle,isOpen:we.status,closeIcon:we.closeIcon}))};function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=window.wffn.is_ab_experiment,Ye=window.wffn.is_ab_experiment_support,$e=function(e){return{status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.I)()+"AB-testing.png",proLink:Object(b.J)([e.replace(" ","+"),"AB_Test","Upgrade","Modal"])}},Qe={status:!0,title:Object(u.__)("Add Offer","funnel-builder"),proLink:Object(b.J)(["Add","Offer","Upgrade","Modal"])},He=function(e){return{type:2,status:!0,proLink:Object(b.J)([e.replace(" ","+"),"Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")}},Ge=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,a=void 0===n?{}:n,o=t.tags,f=void 0===o?[]:o,p=t.type,y=t.substeps,w=(y=void 0===y?{}:y).offer,g=void 0===w?[]:w,_=(t.experiment,t.experiment_status),E=e.stepPos,S=e.step,k=e.title,N=a.title,C=a.view,x=a.status,P=Object(b.y)(),A=j.a.getFunnel(),I=Re(Object(r.useState)(!1),2),D=I[0],B=I[1],F=Re(Object(r.useState)(f),2),L=F[0],z=F[1],U=Re(Object(r.useState)(!1),2),q=U[0],J=U[1],Y=Re(Object(r.useState)(!1),2),ce=Y[0],le=Y[1],oe=Re(Object(r.useState)(!1),2),ie=oe[0],se=oe[1],ue=Re(Object(r.useState)(!1),2),be=ue[0],fe=ue[1],de=Re(Object(r.useState)(!1),2),me=de[0],Oe=de[1],je=Re(Object(r.useState)({}),2),ve=je[0],ye=je[1],we=Re(Object(r.useState)({}),2),ge=we[0],he=we[1],_e=Object(T.a)().isProFeatureLocked,Ee=Object(T.a)("ul").isExpired,Se=Object(O.a)(),ke=Se.startDuplicateStep,Ne=Se.startDeleteStep,Ce=Se.setStepTitle,xe=Se.sortSubSteps,Pe=Se.setUpdateFunnel,Ae=Object(ne.a)().setToggleState,Te=Object(ae.a)().setStepHeaderData,Ie=Object(te.a)().setModalData,De=Object(v.a)(),Be=De.setActiveGroup,Fe=De.setImportOffer,ze=Object(re.a)().setExperimentStatus,Ue=Object(T.b)().showSnackbar,qe=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Ge=function(){if(S&&S.hasOwnProperty("id")&&S.id){Ce(Object($.decodeEntities)(N)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(P,"/experiments/").concat(S.id);Object(b.Y)()&&(e="/store-checkout/experiments/".concat(S.id)),Object(h.k)({},e)}},Ve=function(e){Oe(!0);var t="/funnel-".concat(p,"/save-state/").concat(S.id,"?funnel_id=").concat(P);i()({path:Object(b.p)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Ae(!Number(x)),Oe(!1),fe(!1),se(!1),function(e,t,n){var r=null==A?void 0:A.steps.map((function(r){if(r.id===S.id){r.experiment_status=n;var a=Me(Me({},r._data),{},{status:e?"1":"0",experiment_status:t?"3":r.experiment_status});return Me(Me({},r),{},{_data:a})}return r}));A.steps=r;var a=JSON.parse(JSON.stringify(A));Pe(a)}(Number(t.step_data.status),e,t.step_data.experiment_status),ye({}),Ue(Object(u.__)("Changes Saved","funnel-builder"))):(Ae(Number(x)),Oe(!1),fe(!1),se(!1))})).catch((function(e){console.log(e),Ae(x),Ue("Status Updation Failed")}))},We={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},Ke={1:"warning",2:"success",3:"default"},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ke[e]:We[e]};Object(r.useEffect)((function(){0!==Object(c.size)(g)||"wc_upsells"!==p||"no_offers"in f?Object(c.size)(g)>0&&z(f):z(Me(Me({},L),{},{no_offers:{offerlabel:Object(u.__)("No offers","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[g.length]);var Ze,et,tt,nt=function(e){e.preventDefault(),Be("upsell"),Fe({parent_id:parseInt(S.id),parent_title:S._data.title}),Object(h.k)({importType:"step"})},rt=function(e,t){if(le(!0),(e=e.trim())!==N||(null==a?void 0:a.post_name)!==t&&"wc_upsells"!=p){Ce(e);var n='{"title":"'.concat(e,'","slug":"').concat("wc_upsells"==p?C.match(/([^\/]*)\/*$/)[1]:t,'"}');i()({path:Object(b.p)("/funnel-".concat(p,"/save-state/").concat(S.id,"?funnel_id=").concat(P)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);J(!1),le(!1),function(e,t,n){var r=A.steps.map((function(r){return r.id===Number(S.id)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));A.steps=r;var a=JSON.parse(JSON.stringify(A));Pe(a)}(e.step_data.title,t,e.step_data.view_link),Ue(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Ce(N),Ue("Title Updation Failed")}))}else J(!1),le(!1)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.P)(P,p,S.id),className:"bwf-card-action",onClick:function(e){e.preventDefault(),Te(Object(b.Q)(p),S.id,"",{title:N,view_link:C,status:1===Number(x),experiment_status:_}),Object(h.k)({page:"bwf",path:Object(b.P)(P,p,S.id,"",!1)},"/",{})}},Object($.decodeEntities)(N))),"wc_upsells"===p&&Ee?Object(r.createElement)(W.b,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(L)>0&&Object.keys(L).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e||"has_rules"===e?(Te(Object(b.Q)(p),S.id,"",{title:N,view_link:C,status:1===Number(x),experiment_status:_}),Object(h.k)({},L[e].edit,qe)):"no_offers"===e&&nt(t)}},Object(r.createElement)("div",{className:d()("bwf-st-c-badge-small",L[e].label_class)},L[e].hasOwnProperty("offerlabel")?L[e].offerlabel:L[e].label))})),!Object(c.isEmpty)(_)&&"4"!==_&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){!_e&&Je?Ye?(ze(_),Ge()):B(!0):he($e)}},Object(r.createElement)(W.b,{content:(Ze=_,tt="warning"===(et=Xe(_,!0))?"#B68F40":"success"===et?"#09B29C":"default"===et?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{fill:tt}),Object(r.createElement)("span",{className:"".concat(void 0!==tt?"bwf-mr-4":"")},Xe(Ze)))),type:Xe(_,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!_e&&Je?Ye?(Ge(),ze(_)):B(!0):he($e(k))},title:"A/B Test Step",className:"bwf-list-btn ".concat("wc_upsells"===p?"bwf-visibility-hidden":"")},Object(r.createElement)(m.a,{icon:_e?"king":"experiment",width:"16",height:"16",color:_e?R.NOTICE_YELLOW:R.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object($.decodeEntities)(C),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),J(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),function(){try{ye({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(N)),"funnel-builder")))}),Ve()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(_)?se(!0):fe(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){_e?he(He(k)):(t(),ke(S,E+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),_e&&Object(r.createElement)(Q.c,null,Object(r.createElement)(W.a,null)))),Object(r.createElement)(G.a,{isClickable:!0,onInvoke:function(){t(),Ie({title:N}),Ne(S,E)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!_e})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(W.b,{className:"bwf-cursor-default",content:"wc_upsells"===p?Object(u.__)("Upsell","funnel-builder"):Object(b.eb)(p)}))),ge.status&&Object(r.createElement)(M.a,{isOpen:ge.status,onRequestClose:function(){return he({status:!1})},modalContent:ge,type:ge.type}),D&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return B(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated."))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return B(!1)}},Object(u.__)("OK")))),"wc_upsells"==p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(g)>0&&g.map((function(e,t){return Object(r.createElement)(Le,{key:t,offer:e,upsellStep:S,upsellPos:E,stepPos:t,total:Object(c.size)(g),view:Object($.decodeEntities)(C),onSortStart:function(e,t){return function(e,t,n){var r=[];"up"===t?r=xe(e,"offer",n,n-1):"down"===t&&(r=xe(e,"offer",n,n+1)),i()({path:Object(b.p)("/funnels/steps/order/save/".concat(e,"?type=offer")),method:"POST",data:{order:r.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))}(S.id,e,t)}})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){Ee?he(Qe):nt(e)}},Ee&&Object(r.createElement)(m.a,{icon:"king",color:R.NOTICE_YELLOW,size:20}),Object(u.__)("Add Offer","funnel-builder"))))),q&&("wc_upsells"==p?Object(r.createElement)(V.a,{renameTitle:"Edit Details",title:Object($.decodeEntities)(N),onclose:function(){return J(!1)},updateTitle:function(e){return rt(e)},isLoading:ce}):Object(r.createElement)(pe.a,{pageUrl:null==a?void 0:a.view_link,pageUrlSlug:null==a?void 0:a.post_name,renameTitle:"Step",title:Object($.decodeEntities)(N),onclose:function(){return J(!1)},updateDetail:function(e,t){return rt(e,t)},isLoading:ce})),be&&Object(r.createElement)(Z.a,{isPublishLoading:me,onAction:function(){return Ve()},onclose:function(){return fe(!1)}}),ie&&Object(r.createElement)(X.a,{isPublishLoading:me,onAction:function(){Ve(!0)},onclose:function(){return se(!1)}}),Object(r.createElement)(ee.a,{className:d()("bwf-admin-modal-squeezy",ve.className),confirmText:ve.confirmText,confirmButtonText:ve.buttonConfirm,cancelButtonText:ve.buttonCancel,onConfirm:ve.onConfirm,isLoading:ve.loading,successMessage:ve.success,errorMessage:ve.error,content:ve.content,onRequestClose:function(){return ye({status:!1})},modalTitle:ve.modalTitle,isOpen:ve.status,closeIcon:ve.closeIcon}))};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,l=void 0===n?{}:n,o=t.tags,i=void 0===o?[]:o,f=(t.experiment,t.substeps),p=(f=void 0===f?{}:f).wc_order_bump,j=void 0===p?[]:p,v=t.id,y=void 0===v?0:v,w=(t.experiment_status,e.step),g=e.stepPos,_=void 0===g?0:g,E=e.title,S=e.isOBFake,k=Object(T.a)(),N=k.isProFeatureLocked,C=(k.isExpired,Object(a.useParams)().id,l.title,l.view),x=(l.edit,l.status,Object(te.a)().setModalData,Object(O.a)()),P=x.startAddStep,A=x.setShowProModal,I=x.setShowProModalText,D=x.setShowAddStepModal,B=Xe(Object(r.useState)({}),2),F=B[0],L=B[1],z=Xe(Object(r.useState)(i),2),M=z[0],U=z[1];Object(r.useEffect)((function(){0!==Object(c.size)(j)||"no_bump"in i||U(We(We({},M),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[j.length]);var q=Object(b.U)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{style:{color:"#353030"}},Object(u.__)("No Checkout Created","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("span",{className:"bwf-card-action",style:{minWidth:"110px"}}),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)(s.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(h.k)({importType:"step"}),D(!0)}},Object(u.__)("Create Checkout","funnel-builder")))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!N})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-st-c-badge-small bwf-st-c-badge-gray bwf-cursor-text"},E))),null!==q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(j)>0&&j.map((function(e,t){return Object(r.createElement)(me,{key:t,bump:e,checkoutStep:w,checkoutPos:_,stepPos:t,view:Object($.decodeEntities)(C)})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){N?L({bump:!0}):function(e){null!==q&&P(We(We({},q),{},{parent_id:parseInt(y),is_substep:!0,title:Object(u.__)("Order Bump","funnel-builder")})),!q&&A(!0),!q&&I(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()}(e)}},N&&Object(r.createElement)(m.a,{icon:"king",color:R.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(Y,{type:"order_bump",onClick:function(){return A(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Eye-catching bump styles","funnel-builder"),Object(u.__)("Targeted offers based on cart contents","funnel-builder"),Object(u.__)("Increased product discoverability","funnel-builder")]},image:Object(b.I)()+"order-bump.png",proLink:Object(b.J)(["Order","Bump","Upgrade","Modal"])}}))),F.bump&&Object(r.createElement)(Oe.a,{isOpen:F.bump,onRequestClose:function(){return L({status:!1})}}))},tt=["step","step"];function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var at=Object(z.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag"},Object(r.createElement)(m.a,{icon:"ul",size:"20"}))})),ct=function(e){var t=e.step,n=(t=void 0===t?{}:t).type,a=t.experiment,l=void 0===a?[]:a,o=e.step,i=rt(e,tt),s=Object(b.S)(n);if(!o)return null;return Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c"},0<Object(c.size)(l)&&Object(r.createElement)("div",{className:"bwf-ab-tag"},Object(r.createElement)("div",{className:"bwf-ab--text"},Object(u.__)("A/B","funnel-builder"))),Object(r.createElement)(at,null),function(){switch(n){case"wc_checkout":return Object(r.createElement)(Ne,nt({step:o,title:null==s?void 0:s.title},i));case"wc_native":return Object(r.createElement)(et,nt({step:o,title:Object(u.__)("Checkout Page","funnel-builder")},i));default:return Object(r.createElement)(Ge,nt({step:o,title:null==s?void 0:s.title},i))}}()))},lt=Object(z.b)(ct),ot=Object(z.a)((function(e){var t=e.items,n=e.stepPromotions,a=Object(T.a)().isLite,c=Object(T.a)("ul").isLite,l=!1,o=!1;return Object(r.createElement)("div",{className:"bwf-f-steps"},t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-st-c-".concat(t)},Object(r.createElement)(lt,{key:"item-".concat(e.id),index:t,step:e,stepPos:t,isOBFake:!(!["wc_checkout","wc_native"].includes(e.type)||"yes"===n.bump)&&!(o||!a||Object(b.U)("wc_order_bump")||(o=!0,0))}),["wc_checkout","wc_native"].includes(e.type)&&"yes"!==n.upsell&&(!l&&c?(l=!0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Y,{modalContent:{title:Object(u.__)("One Click Upsell Offer","funnel-builder"),content:{benefits:[Object(u.__)("Grab buyer's attention and make post purchase One Click Upsells based on items purchased. Let them accept offers with a single click.","funnel-builder")]},image:Object(b.I)()+"upsell.png",proLink:Object(b.J)(["One","Click","Upsell","Upgrade","Modal"])}}))):""))})))})),it=function(){return Object(r.createElement)("div",{className:"bwf-steps-container"},Object(r.createElement)("div",{className:"bwf-f-steps is-placeholder"},Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})))))))},st=n(253),ut=(n(553),n(19));function bt(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||Ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt=function(e){var t=pt(Object(r.useState)([]),2),n=t[0],a=t[1],l=pt(Object(r.useState)([]),2),o=l[0],f=l[1],d=pt(Object(r.useState)([]),2),p=d[0],v=d[1],y=pt(Object(r.useState)(!1),2),g=y[0],h=y[1],_=pt(Object(r.useState)(!1),2),E=_[0],S=_[1],k=pt(Object(r.useState)(!0),2),N=k[0],C=k[1],x=pt(Object(r.useState)([]),2),P=x[0],A=x[1],I=e.isOpen,D=e.onRequestClose,B=e.funnelID,F=(e.stepsListTypes,Object(T.b)().showSnackbar),L=j.a.getFunnel(),z=(j.a.getFunnelSteps(),Object(O.a)().setUpdateFunnel);Object(r.useEffect)((function(){var e=[];P.map((function(t){[0,"0"].includes(t.status)&&e.push({type:t.type,id:Number(t.id)}),Object(c.size)(t.subStep)&&t.subStep.map((function(n){[0,"0"].includes(n.status)&&e.push({type:n.type,id:Number(n.id),subParentId:Number(t.id)})}))})),v(e)}),[P]);Object(r.useEffect)((function(){if(Object(c.size)(L.steps)){var e=L.steps.map((function(e){var t,n,r,a,l,o,i;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(a=r.substeps)||void 0===a||null===(l=a.wc_order_bump)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(o=r.substeps)||void 0===o||null===(i=o.offer)||void 0===i?void 0:i.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return[0,"0"].includes(e.status)||Object(c.size)(e.subStep)&&Object(c.size)(n)?e:void 0}));A(e)}}),[]);var M=function(e,t){a((function(e){return[].concat(bt(e),[t])}));var n="";n="/funnel-".concat(e,"/save-state/").concat(t,"?funnel_id=").concat(B),i()({path:Object(b.p)(n),method:"POST",data:{status:!0}}).then((function(e){var n,r;e.success?(a((function(e){return[e.filter((function(e){return e!==t}))]})),f((function(e){return[].concat(bt(e),[t])})),e.step_data.hasOwnProperty("upsell_id")&&(n=e.step_data.upsell_id,r="offer"),e.step_data.hasOwnProperty("checkout_id")&&(n=e.step_data.checkout_id,r="wc_order_bump"),function(e,t,n,r){var a=null==L?void 0:L.steps.map((function(a){if(n&&a.id===Number(n)){var c=a.substeps[r].map((function(e){var n=dt(dt({},e._data),{},{status:t.includes(e.id)?"1":e._data.status});return dt(dt({},e),{},{_data:n})})),l=dt(dt({},a.substeps),{},mt({},r,c));return dt(dt({},a),{},{substeps:l})}if(t.includes(a.id)){var o=dt(dt({},a._data),{},{status:e?"1":"0"});return dt(dt({},a),{},{_data:o})}return a}));L.steps=a;var c=JSON.parse(JSON.stringify(L));z(c)}(!0,[t],n,r)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(u.__)("Status Updation Failed","funnel-builder"))}))},U=function(){h(!0);var e="/funnels/".concat(B,"/publish-all");i()({path:Object(b.p)(e),method:"POST",data:{steps:JSON.stringify(p)}}).then((function(e){e.status?(Object(c.size)(e.steps)&&p.map((function(e){var t=null==L?void 0:L.steps.map((function(t){if(t.id===e.subParentId){var n=t.substeps["Offer"===e.type?"offer":"wc_order_bump"].map((function(t){var n=dt(dt({},t._data),{},{status:Number(e.id)===Number(t.id)?"1":t._data.status});return dt(dt({},t),{},{_data:n})})),r=dt(dt({},t.substeps),{},mt({},"Offer"===e.type?"offer":"wc_order_bump",n));return dt(dt({},t),{},{substeps:r})}if(Number(e.id)===Number(t.id)){var a=dt(dt({},t._data),{},{status:"1"});return dt(dt({},t),{},{_data:a})}return t}));L.steps=t;var n=JSON.parse(JSON.stringify(L));z(n)})),h(!1),S(!0)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(u.__)("Status Updation Failed","funnel-builder"))}))};return Object(r.useEffect)((function(){var e=0;P.map((function(t){[0,"0"].includes(t.status)&&(e+=1),t.subStep.map((function(t){[0,"0"].includes(t.status)&&(e+=1)}))})),e&&e<2&&C(!1)}),[P,L]),I&&Object(r.createElement)("div",null,Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-publish-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return D()}},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Publish Steps","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},!E&&N&&Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return U()}},Object(r.createElement)("span",{style:dt({},g&&{visibility:"hidden"})},Object(u.__)("Publish All","funnel-builder")),g&&Object(r.createElement)(w.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(u.__)("Close"),onClick:function(){return D()}},Object(r.createElement)(m.a,{icon:"close",height:20,width:20})))),Object(r.createElement)("div",{className:"bwf-info"},Object(u.__)("Following steps need to publish to make accessible to your customers:","funnel-builder")),P.map((function(e,t){var a;return Object(r.createElement)("div",{key:t,className:"bwf-draft-list"},Object(r.createElement)("div",{className:"bwf-title"},Object($.decodeEntities)(e.title)),Object(r.createElement)(W.b,{content:"wc_upsells"===e.type?Object(u.__)("One Click Upsell","funnel-builder"):Object(b.eb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary components-button bwf-ripple ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(w.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||o.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!o.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")),Object(c.size)(e.subStep)&&Object(c.size)(null==e||null===(a=e.subStep)||void 0===a?void 0:a.filter((function(e){return[0,"0"].includes(e.status)})))?e.subStep.map((function(e,t){if([0,"0"].includes(e.status))return Object(r.createElement)(r.Fragment,{key:t},Object(r.createElement)("div",{className:"bwf-title bwf-sub-step"},Object(r.createElement)("span",null,Object($.decodeEntities)(e.title))),Object(r.createElement)(W.b,{content:Object(b.eb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary bwf-ripple components-button".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(w.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||o.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!o.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary bwf-ripple components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")))})):null)}))))},yt=(n(115),n(147)),wt=n(82);n(554);function gt(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(e){var t=e.funnelId,n=e.funnelStatus,a=Object(T.b)().showSnackbar,c=Object(O.a)().setFunnelStatus,l=ht(Object(r.useState)(!1),2),o=l[0],s=l[1],f=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="Draft"===n?"Published":"Draft",e.prev=1,s(!0),e.next=5,i()({method:"POST",path:Object(b.p)("/store-checkout/".concat(t,"/status"))});case 5:e.sent.status&&(a("Published"===r?Object(u.__)("Store Checkout Enabled","funnel-builder"):Object(u.__)("Store Checkout Disabled","funnel-builder")),c(t,r)),s(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("toggleStoreCheckoutStatus:",e.t0),a(e.t0.message),s(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){gt(c,r,a,l,o,"next",e)}function o(e){gt(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(ut.a,{className:"is-success",onClick:f,isBusy:o,isSmall:!0},Object(u.__)("Enable Store Checkout","funnel-builder"))},St=n(77);function kt(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(a.useParams)(),n=t.id,o=t.builder,f=t.filter,d=e.funnelId,p=void 0===d?n:d,y=location&&location.search?Object(l.parse)(location.search.substring(1)):{},w=Object(yt.a)().resetFlowData,E=Object(wt.a)().resetCanvasData,S=y.importType,N=Object(O.a)(),C=N.fetch,x=N.sortSteps,P=N.updateFunnelViewLink,I=N.setShowProModal,D=N.setShowAddStepModal,B=N.setIsFunnelEmpty,z=N.setFunnelSteps,M=N.setLoading,U=Object(r.useRef)(!0),R=j.a.getFunnelID,q=j.a.getFunnel,J=j.a.getFunnelStatus,Y=j.a.getFunnelLoading,$=j.a.getFunnelError,Q=j.a.getShowProModal,H=j.a.getShowAddStepModal,G=j.a.getIsFunnelEmpty,V=R(),W=q(),K=J(),X=Y(),Z=$(),ee=Q(),te=H(),ne=G(),ae=(0,Object(k.a)().getStepPromotion)(),ce=Object(re.a)().setControlTitle,le=Pt(Object(r.useState)(!1),2),oe=le[0],ie=le[1],se=Object(T.b)(),ue=se.showSnackbar,be=se.hideSnackbar,fe=Pt(Object(r.useState)(!1),2),de=fe[0],me=fe[1],pe=Pt(Object(r.useState)(!1),2),je=pe[0],ve=pe[1],ye=Pt(Object(r.useState)(""),2),we=ye[0],ge=ye[1],he=Pt(Object(r.useState)([]),2),_e=he[0],Ee=he[1],Se=Pt(Object(r.useState)({}),2),ke=(Se[0],Se[1]),Ne=Pt(Object(r.useState)([]),2),Ce=Ne[0],xe=Ne[1],Pe=Object(b.Y)(),Ae=Object(v.a)().setActiveGroup;Object(r.useEffect)((function(){(parseInt(V)!==parseInt(p)||Object(c.isEmpty)(W))&&(M(!0),C(parseInt(p)))}),[]),Object(r.useEffect)((function(){ce(null),me(!1)}),[X]);var Te=function(e,t){return e.filter((function(e){return e.type===t}))},Ie=function(){var e="";if(!Pe&&!X&&!oe&&W&&W.steps&&W.steps.length&&Array.isArray(W.steps)){var t=Object(c.size)(Te(W.steps,"wc_checkout")),n=Te(W.steps,"wc_thankyou"),r=Te(W.steps,"wc_upsells");t?t&&(function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_upsells"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(W.steps)||function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_thankyou"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(W.steps)?(Object(c.size)(n)&&Object(c.size)(r)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step and <strong>One-Click Upsell offers</strong> step are placed below the <strong>checkout</strong> step.","funnel-builder")):Object(c.size)(n)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder")):Object(c.size)(r)&&(e="".concat(Object(u.__)("Make sure that your <strong>One-Click Upsell offers</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder"))),ge(e)):ge("")):function(e){var t=Te(e,"wc_thankyou"),n=Te(e,"wc_upsells"),r="";Object(c.size)(t)&&Object(c.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> and <strong>One Click Upsell offers</strong> steps, you need to create a <strong>Checkout step</strong>.","funnel-builder")):Object(c.size)(t)&&!Object(c.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder")):!Object(c.size)(t)&&Object(c.size)(n)&&(r="".concat(Object(u.__)("To trigger <strong>One Click Upsell offers</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder"))),ge(r)}(W.steps)}};Object(r.useEffect)((function(){"step"!==S&&Ie()}),[W,oe,S]),Object(r.useEffect)((function(){return function(){ne&&B(!1),be()}}),[]),Object(r.useEffect)((function(){S&&!Pe&&(f?Ae(f):"funnel"!==S||o?"step"===S&&!o&&U.current&&Ae("wc_checkout"):Ae("landing")),U.current&&(U.current=!1)}),[S]);Object(r.useEffect)((function(){if(Object(c.size)(W)){var e,t=null==W||null===(e=W.steps)||void 0===e?void 0:e.map((function(e){var t,n,r,a,l,o,i;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(a=r.substeps)||void 0===a||null===(l=a.wc_order_bump)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(o=r.substeps)||void 0===o||null===(i=o.offer)||void 0===i?void 0:i.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return Object(c.size)(e.subStep)&&Object(c.size)(n)?e.subStep=n:[0,"0"].includes(e.status)?(e.subStep=[],e):void 0})),n=[];t.map((function(e){if("wc_checkout"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_checkout"),"wc_upsells"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_upsells"),"wc_checkout"===e.type&&Object(c.size)(e.subStep)){var t,r=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(c.size)(r)).fill("bump").forEach((function(){n.push("bump")}))}if("wc_upsells"===e.type&&Object(c.size)(e.subStep)){var a,l=null==e||null===(a=e.subStep)||void 0===a?void 0:a.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(c.size)(l)).fill("offer").forEach((function(){n.push("offer")}))}["wc_checkout","wc_upsells"].includes(e.type)||Object(c.size)(e.subStep)||n.push(e.type)}));var r=n.reduce((function(e,t){return Ct(Ct({},e),{},xt({},t,(e[t]||0)+1))}),{});xe(n),ke(r),Ee(t),w(),E(),je||z(null==W?void 0:W.steps)}}),[W]);var De=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldIndex,r=t.newIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:return a=x(n,r),ie(!0),e.prev=5,e.next=8,i()({path:Object(b.p)("/funnels/".concat(p)),method:"PUT",data:{steps:JSON.stringify(a.map((function(e){return{id:e.id,type:e.type}})))}});case 8:Object(b.Y)()||P(a.length>0?a[0]._data.view:""),ue(Object(u.__)("Steps Updated","funnel-builder")),setTimeout((function(){return ie(!1)}),2e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),x(r,n),Object(b.Y)()||P(a.length>0?a[0]._data.view:""),ue(Object(u.__)("Steps Updation Failed","funnel-builder")),setTimeout((function(){return ie(!1)}),2e3);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){kt(c,r,a,l,o,"next",e)}function o(e){kt(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(S&&!Pe)return Object(r.createElement)(r.Fragment,null,"funnel"===S?Object(r.createElement)(_.default,{onImportComplete:function(){C(parseInt(p)),delete y.importType,delete y.group,Object(h.k)({},"/funnels/".concat(p),y)}}):Object(r.createElement)(g.a,{onImportComplete:function(){C(parseInt(p)),delete y.importType,delete y.group,Object(h.k)({},"/funnels/".concat(p),y)}}));if(!de&&!X&&!ne&&Z)return Object(r.createElement)(St.a,{errorMessage:Z.hasOwnProperty("message")?Z.message:Object(u.__)("Unable to load Funnel Steps","funnel-builder")});var Be=[{type:"icon",data:{content:Object(r.createElement)(m.a,{icon:"zero-step-alt",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(u.__)("Start building your funnel","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(u.__)("Add a new step or pick a pre-built funnel","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(u.__)("Add New Step","funnel-builder"),proCheck:!1,onClick:function(){Object(h.k)({importType:"step"}),Ae("landing"),Pe&&D(!0)}},{text:Object(u.__)("View Funnels","funnel-builder"),proCheck:!1,props:{isPrimary:!1,isSecondary:!0},onClick:function(){Pe?(D(!0),Object(h.k)({importType:"wc_checkout"})):Object(h.k)({importType:"funnel"})}}]}}];return!(W&&W.hasOwnProperty("steps")&&Object(c.isArray)(W.steps)&&0!==Object(c.size)(W.steps)||X||de)?Object(r.createElement)(st.a,{data:Be}):Object(r.createElement)(r.Fragment,null,de||X?Object(r.createElement)(it,null):Object(r.createElement)(r.Fragment,null,Object(b.Y)()&&!X&&"Published"!==K&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Notice,{status:"info",isDismissible:!1,className:"bwf-component-notice bwf-store-checkout-enable-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(m.a,{icon:"info",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(u.__)("Store Checkout is currently disabled. Click ","funnel-builder"),Object(r.createElement)("strong",null,Object(u.__)("Enable","funnel-builder")),Object(u.__)(" to override the current checkout of this store.","funnel-builder"))),Object(r.createElement)(Et,{funnelId:p,funnelStatus:K})),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(b.Y)()&&Object(c.some)(W.steps,{type:"wc_native"})&&Object(r.createElement)("div",null,Object(c.some)(W.steps,{type:"wc_native"})&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Notice,{status:"warning",isDismissible:!1,className:"bwf-component-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(m.a,{icon:"shield",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(u.__)("You are using the default WooCommerce checkout page. Order bumps, upsell & thank you pages will work with the default checkout page. However, we recommend adding an optimized checkout page from FunnelKit.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-steps-container"},Object(c.size)(we)?Object(r.createElement)("div",{className:"bwf-publish-container bwf-no-action",dangerouslySetInnerHTML:{__html:we}}):null,Object(r.createElement)(ot,{items:W.steps,onSortEnd:De,useDragHandle:!0,helperClass:"bwf-steps-drag__helper",stepPromotions:ae}))),Object(r.createElement)(F,{funnelId:p}),Object(r.createElement)(L.a,{funnelId:p}),ee&&Object(r.createElement)(Oe.a,{isOpen:ee,onRequestClose:function(){return I(!1)}}),Object(r.createElement)(A,{query:y,isOpen:te,setModalOpenState:function(e){D(e)},hasCheckoutStep:W&&W.steps&&Object(c.isArray)(W.steps)&&W.steps.some((function(e){return"wc_checkout"===e.type})),funnelId:p}),je&&Object(r.createElement)(vt,{isOpen:je,stepsList:_e,funnelID:p,stepsListTypes:Ce,onRequestClose:function(){return ve(!1)}}))}},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n(7),c=n.n(a),l=(n(260),["className","onChange","label","color","disabled"]);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e){var t=e.className,n=e.onChange,a=e.label,s=e.color,b=e.disabled,f=u(e,l),d=i(Object(r.useState)(!0),2),m=d[0],p=d[1],O=Object(r.useRef)();return Object(r.createElement)("div",{className:c()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",o({type:"checkbox"},f,{onChange:function(e){b||(n(e.target.checked),p(!1))},ref:O,className:c()({"bwf-no-animation":m,"bwf-disable":b}),style:{"--current-checkbox-color":s}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(b?"bwf-disable":""),onClick:function(){return O.current.click()}},a))}},249:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),c=n(7),l=n.n(c),o=n(51),i=n(9),s=(n(4),n(1)),u=n(61);n(277);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,c=e.id,f=void 0===c?"":c,d=e.value,m=e.onChange,p=void 0===m?a.noop:m,O=e.className,j=e.style,v=void 0===j?{}:j,y=e.isHover,w=e.hoverVal,g=void 0===w?"":w,h="inspector-color-".concat(Object(o.useInstanceId)(i.ColorPicker)),_=b(Object(r.useState)(!1),2),E=_[0],S=_[1],k=b(Object(r.useState)(),2),N=k[0],C=k[1],x=b(Object(r.useState)(0),2),P=x[0],A=x[1],T=y?Object(a.isArray)(d)?d:[d,g]:d,I=function(e){if(y){var t=T;return t[P]=e.hex,void p(t,{id:f})}p(e.hex,{id:f})},D=y?T[P]:T;return Object(r.createElement)("div",{className:l()("components-color-field",O),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:h},n),y&&Object(r.createElement)(i.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":0===P}),onClick:function(){return A(0)}},Object(s.__)("Default","funnel-builder")),Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":1===P}),onClick:function(){return A(1)}},Object(s.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(i.ColorIndicator,{colorValue:D,ref:C,className:l()({"is-empty":Object(a.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(u.a,{position:"top right",onClose:function(){return S(!1)},anchor:N},Object(r.createElement)(i.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(i.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(s.__)("Reset","funnel-builder")))))}},252:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(56),l=n(2),o=n(9);n(7),n(263);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.value,n=void 0===t?"":t,o=e.onChange,i=e.keyid,u=e.openMergeTagModal,d=e.customSettings,m=void 0===d?{}:d,p=e.toolbar,O=e.quicktags,j=void 0!==O&&O,v=Object(r.useRef)(!1),y=Object(r.useRef)(n),w=f(Object(r.useState)(n),2),g=w[0],h=w[1],_=f(Object(r.useState)(!1),2);_[0],_[1];return Object(r.useEffect)((function(){if(v.current){var e=window.tinymce.get("editor-bwf"+i);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),y.current=n||"")}}),[n]),Object(r.useEffect)((function(){v.current&&o(g)}),[g]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(l.isEmpty)(r)||(a=[].concat(b(Object(l.isArray)(r)?r:r.split(",")),b(a))),wp.editor.initialize("editor-bwf"+i,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:p||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:b(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+i,plugins:a},m),quicktags:!!j&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(l.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,h(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){c.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==c.BACKSPACE&&t.keyCode!==c.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===c.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(y.current),h(y.current)}))}function n(){"complete"===document.readyState&&e()}return v.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",n),function(){document.removeEventListener("readystatechange",n),wp.oldEditor.remove("editor-bwf"+i)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+i,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){o(e.target.value)}}))};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=O(Object(r.useState)("visual"),2),c=a[0],l=(a[1],O(Object(r.useState)(),2)),i=l[0],s=l[1];return Object(r.useEffect)((function(){s(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===c&&Object(r.createElement)(p,e),n&&"text"==c&&Object(r.createElement)(o.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:i,onChange:function(t){null!=e&&e.onChange(t)}}))))}},253:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n.n(a),l=n(2),o=n(9),i=n(41),s=(n(265),n(8));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,f=e.center,d=void 0!==f&&f,m=e.isDismissive,p=void 0!==m&&m,O=e.onDismisal,j=void 0===O?function(){}:O,v=e.isProFeatureLocked;if(Object(l.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:c()("bwf-zero-state",a,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return j()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(s.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(i.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(i.a,{key:"layout-block-"+t,className:c()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(i.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(i.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(i.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(o.Button,b({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===u(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},260:function(e,t,n){},261:function(e,t,n){"use strict";var r=n(0),a=(n(273),n(8));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.children,n=e.status,l=void 0===n?"error":n,o=(e.onRemove,e.isDismissible,e.className),i=void 0===o?"":o,s=c(Object(r.useState)(!1),2),u=s[0];s[1];return!u&&Object(r.createElement)("section",{className:"bwf-custom-notice ".concat(l," ").concat(i)},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)(a.a,{icon:"info",color:"success"===l?"#09B29C":"warning"===l?"#FFC65C":"info"===l?"#353030":"#E15334"}),Object(r.createElement)("div",{className:"bwf--align-center"},t)))}},263:function(e,t,n){},265:function(e,t,n){},273:function(e,t,n){},277:function(e,t,n){},281:function(e,t,n){"use strict";var r=n(9),a=n(0),c=n(7),l=n.n(c),o=n(251),i=n(247),s=n(243),u=n(2),b=n(282),f=["ajax_cb","options"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var j=n(252),v=["value","onChange","id","label","className"];function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,c=e.id,o=e.label,i=e.className,s=w(e,v);function u(e){r(e,c)}return Object(a.createElement)("div",{className:l()("components-richeditor",i)},o&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:c},o),Object(a.createElement)(j.a,y({content:n,value:n,setContent:u,onChange:u,keyid:c},s)))},h=n(8),_=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:l()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(h.a,{icon:"duplicate",size:20}),"Copy")))},E=n(244),S=n(249),k=n(1),N=(n(287),n(4));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){var n;if(Object(u.isObject)(e))return e;if(Object(u.isString)(e)){var r,a=e.split(" ");return T(r={},t.attrTop,Object(u.isEmpty)(a[0])?"0":a[0]),T(r,t.attrRight,Object(u.isEmpty)(a[1])?"0":a[1]),T(r,t.attrBottom,Object(u.isEmpty)(a[2])?"0":a[2]),T(r,t.attrLeft,Object(u.isEmpty)(a[3])?"0":a[3]),r}return T(n={},t.attrTop,"0"),T(n,t.attrRight,"0"),T(n,t.attrBottom,"0"),T(n,t.attrLeft,"0"),n},D=function(e){var t,n=e.value,c=void 0===n?{}:n,o=e.label,i=e.type,s=e.onChange,b=void 0===s?u.noop:s,f=(e.defaultSync,I(c,e)),d="",m=P(Object(a.useState)(!Object(N.g)(Object.values(f))),2),p=m[0],O=m[1],j=P(Object(a.useState)(Object(u.cloneDeep)(Object(u.defaultsDeep)(f,(T(t={},e.attrTop,"0"),T(t,e.attrRight,"0"),T(t,e.attrBottom,"0"),T(t,e.attrLeft,"0"),t)))),2),v=j[0],y=j[1];d=v&&v[e.attrUnit]?v[e.attrUnit]:"px",Object(a.useEffect)((function(){y(x(x({},v),I(c,e)))}),[c]),Object(a.useEffect)((function(){var t;y(Object(u.cloneDeep)(Object(u.defaultsDeep)(f,(T(t={},e.attrTop,"0"),T(t,e.attrRight,"0"),T(t,e.attrBottom,"0"),T(t,e.attrLeft,"0"),t)))),d=v&&v[e.attrUnit]?v[e.attrUnit]:"px"}),[]);var w=function(t,n){var r=t.target.value;if(p)!function(t){"padding"===i&&(t=t.toString().replace(/-/g,""));var n=x({},v);if(n[e.attrTop]=t,n[e.attrRight]=t,n[e.attrBottom]=t,n[e.attrLeft]=t,Object(u.isString)(c)){var r="".concat(n[e.attrTop]," ").concat(n[e.attrRight]," ").concat(n[e.attrBottom]," ").concat(n[e.attrLeft]);b(r)}else b(n)}(r);else{"padding"===i&&(r=r.toString().replace(/-/g,""));var a=x({},v);if(a[n]=r,Object(u.isString)(c)){var l="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);b(l)}else b(a)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},o&&Object(a.createElement)("label",{className:"components-base-control__label"},o),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return w(t,e.attrTop)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),o),value:v&&v[e.attrTop],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return w(t,e.attrRight)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),o),value:v&&v[e.attrRight],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return w(t,e.attrBottom)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),o),value:v&&v[e.attrBottom],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return w(t,e.attrLeft)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),o),value:v&&v[e.attrLeft],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)(r.Button,{className:l()("components-bwf-dimensions-control_reset",{"is-lock":p}),label:Object(k.__)("Reset","funnel-builder"),onClick:function(){return O((function(e){return!e}))},isSmall:!0},Object(a.createElement)(h.a,{icon:p?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))};D.defaultProps={label:Object(k.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(k.__)("Top","funnel-builder"),labelRight:Object(k.__)("Right","funnel-builder"),labelBottom:Object(k.__)("Bottom","funnel-builder"),labelLeft:Object(k.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"};var B=D,F=n(51);n(288);function L(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(k.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(k.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(k.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(k.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(k.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(k.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],U=function e(t){var n=t.typography,r=t.setTypography,c=t.settingOptions,l=t.label,o=Object(F.useInstanceId)(e,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:o},l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},c.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:n[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(t){var a=t.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?t.target.value:a<0?0:a;var c=L(n);c[e.selectindex]=a,r(c)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"Â ",Object(a.createElement)("label",{className:"components-base-control__label"},Object(k.__)("Shadow Color","funnel-builder")),Object(a.createElement)(S.a,{value:n[4],onChange:function(e){var t=L(n);t[4]=e,r(t)}})))},R=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,c=n.h_offset,l=void 0===c?"":c,o=n.v_offset,i=void 0===o?"":o,s=n.blur,u=void 0===s?"":s,b=n.spread,f=void 0===b?"":b,d=n.color,m=void 0===d?"":d,p=n.inset,O=[l,i,u,f,m,void 0===p?"":p];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(U,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(289);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.value,n=e.onChange,c=e.label,l=e.defaultCustomValue,o=J(Object(a.useState)(""),2),i=o[0],b=o[1],f=J(Object(a.useState)(""),2),d=f[0],m=f[1];return Object(a.useEffect)((function(){Object(u.isEmpty)(d)&&(Object(u.isEmpty)(null==t?void 0:t.toString())?(m("auto"),b("100%")):(m("custom"),b(t)))}),[t]),Object(a.createElement)(a.Fragment,null,c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,q({value:i,onChange:function(e){n(e),b(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(s.a,{options:[{key:"auto",label:Object(k.__)("Auto","funnel-builder")},{key:"custom",label:Object(k.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){m(e),"auto"===e?(n(""),b("100%")):(n(Object(u.isEmpty)(null==t?void 0:t.toString())?l:t),b(l))}})))},Q=n(75),H=["label","tooltip"];function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee={checkbox:i.a,radio:E.a,select:s.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:o.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,c=O(e,f),l=m(Object(a.useState)(r),2),o=l[0],i=l[1],s=m(Object(a.useState)(!1),2),p=s[0],j=s[1];Object(a.useEffect)((function(){Object(u.isEmpty)(o)&&v()}),[o]);var v=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),i(t),j(!0)}})}))};return Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(b.a,d({options:o},c)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:g,richtext:g,copier:_,color:S.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,c=Z(e,H);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(u.isEmpty)(n)&&Object(a.createElement)(Q.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(h.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,X({},c,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":B,"box-shadow":R,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:l()("bwf_label",n)},t)},width:$};t.a=function(e){var t=e.input,n=e.formProps,c=e.values,o=e.customMapField,i=void 0===o?{}:o,s=W(W({},ee),i),b=s.text;if(t.type.toLowerCase()in s&&(b=s[t.type.toLowerCase()]),t.ajax_cb&&(b=s.ajax),"select"===t.type&&t.multiple&&!Object(u.isEmpty)(c)){var f=c[t.id];if(Object(u.isEmpty)(f))c[t.id]=[];else if(!Object(u.isEmpty)(t.options)&&"string"==typeof f[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&f.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&f.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),c[t.id]=d}}var m,p;return Object(a.createElement)("div",{className:l()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(b,W(W({label:t.label},(m=t,p=Object.assign({},m.props),m.type.toLowerCase()in s||(p.type=m.type.toLowerCase()),p.placeholder=m.placeholder,p.options=m.options,m.checkboxlabel&&(p.checkboxlabel=m.checkboxlabel),m.multiple&&(p.multiple=m.multiple),m.ajax_cb&&(p.ajax_cb=m.ajax_cb),"copier"===m.type&&(p=m),"width"===m.type&&(p=m),"color"===m.type&&(p=m,m.isHover&&m.hoverKey&&(p.hoverVal=c[m.hoverKey])),"richeditor"!==m.type&&"richtext"!==m.type&&"textarea"!==m.type||(p=m),"number"===m.type&&(p.min=m.min,p.max=m.max),"select"===m.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==G(e.value)&&(e.key="object"!==G(e.value)?e.value:e.key,e.value={id:e.value}),e}))),m.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===m.type&&(p.id=m.id),"bwf-toggle"===m.type&&(p.tooltip=m.tooltip),"input"!==m.type&&"text"!==m.type&&"textarea"!==m.type||(p.placeholder=Object(k.__)("Type hereâ€¦","funnel-builder")),"text"===m.type&&m.disabled&&(p.disabled=m.disabled),"toggle"===m.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=m.tooltip,p.label=m.label),p.keyid=m.key,p)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},303:function(e,t,n){"use strict";var r=n(0),a=n(119),c=n(2),l=n(1),o=n(321),i=n(248),s=n(76),u=n(250);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(i.a)(),n=t.getTemplates,f=t.getBuilders,d=t.getDefaultBuilder,p=t.templateLoading,O=t.getActiveBuilder,j=t.getActiveGroup,v=t.getCurrentTemplate,y=t.getActiveStep,w=t.getActiveSubFilter,g=e.onImportComplete,h=e.isStoreCheckout,_=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,k=e.stepId,N=e.funnelId,C=Object(s.a)(),x=C.setActiveGroup,P=(C.setActiveSubFilter,C.setActiveBuilder),A=C.setCurrentTemplate,T=m(m({wc_checkout:Object(l.__)("Checkout","funnel-builder")},!h&&{landing:Object(l.__)("Sales","funnel-builder")}),{},{upsell:Object(l.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(l.__)("Thank You","funnel-builder")},!h&&{optin:Object(l.__)("Optin","funnel-builder"),optin_ty:Object(l.__)("Optin Confirmation","funnel-builder")}),I=Object(a.useParams)(),D=I.id,B=I.filter,F=I.builder,L=I.templateId,z=b(Object(r.useState)(!1),2),M=z[0],U=z[1],R=n();Object(r.useEffect)((function(){return F&&(x(B),P(F),A({id:L})),function(){x("funnel")}}),[]);var q=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(c.isEmpty)(R)&&!M&&F){var e=R[B][F][L];A({id:L,template:e}),U(!0)}}),[R]);var J=f(),Y=d(),$=O(),Q=p(),H=j(),G=v(),V=(y(),w()),W=function(){var e=Y;return Object(c.isEmpty)($)||(e=$),J&&J[H]&&!J[H][e]&&(e=J[H][Y]?Y:"elementor"),e},K=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&V&&$?R[t][$][e].group_type[n||V]:e},X=function(e){return"wc_checkout"===H?V===e.no_steps:"optin"!==H||e.group.includes(V)},Z=function(e,t,n){var r="";return"landing"===H?r="sp":"optin"===H?r="op":"optin_ty"===H?r="op-confirmed":"wc_checkout"===H?r="checkouts":"upsell"===H?r="offer":"wc_thankyou"===H&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===H&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=h?"/store-checkout":0===D?"/templates":"/funnels/".concat(D);return Object(r.createElement)(o.a,{filters:u.e,templates:R,activeBuilder:W(),templateCards:function(){if(Object(c.isEmpty)(R)||Object(c.isEmpty)([H]))return{};var e=W(),t={};return R[H]&&R[H][e]&&(t=R[H][e]),t}(),editors:J,defaultBuilder:Y,isTemplateLoading:Q,activeTemplateGroup:H,templateGroup:T,previewData:function(){if(Object(c.isEmpty)(R)||"funnel"===H)return{};var e={},t=[],n=[];try{!function(){var r=W();for(var a in t=[],R[H][r]){var c=R[H][r][a];if(!c.build_from_scratch&&X(c)){var l={};if(l.id=a,l.funnel=c.group_type?c.group_type[Object.keys(c.group_type)[0]]:a,l.slug=a,l.name=c.name,l.thumbnail=c.thumbnail,l.template=null==G?void 0:G.id,l.pro=c.pro,l.group_type=c.group_type,l.type=H,l.preview=null==c?void 0:c.prevslug,t.push(l),c.group_type)Object.values(c.group_type).forEach((function(e){var t=R[H][r][e];n.push({id:null==t?void 0:t.prevslug,preview:Z(0,t,r)})}));else n.push({id:null==c?void 0:c.prevslug,preview:Z(0,c,r)})}}var o=R[H][r][K(null==G?void 0:G.id,H)];e.activeTemplate={thumbnail:K(null==G?void 0:G.id,H),preview:Z(null==G||G.id,o,r),slug:K(null==G?void 0:G.id,H),name:null!=G&&G.id?R[H][r][null==G?void 0:G.id].name:"",pro:null!=G&&G.id?R[H][r][null==G?void 0:G.id].pro:"",tempPro:null!=G&&G.id?R[H][r][K(null==G?void 0:G.id,H,!("wc_checkout"!==H&&"optin"!==H||!q(G.template))&&q(G.template))].pro:"",group:H,filters:!!o.group_type&&Object.keys(o.group_type),type:H,funnelGroup:[H],prevId:o.prevslug},e.thumbnails=t,e.previews=n}()}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:k&&N?N:h&&_?_:D,onImportComplete:g,templateFilterCheck:function(e,t){return"wc_checkout"===H?t===e.no_steps:"optin"!==H||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:V,showDefaultEditorNotice:!1,isStoreCheckout:h,parentRoute:ee,showTemplatesNav:!(k||h&&0===D),urlDependency:S,stepId:k,importApiPrefix:h?"store-checkout":"funnels"})}},315:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(1),l=n(9),o=n(299),i=n(19),s=n(244),u=n(261),b=n(21);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,d=e.onRequestClose,m=e.onCreationScreen,p=e.creationSuccess,O=e.clearAndCloseEverything,j=e.isBusy,v=e.errors,y=Object(b.a)().isProFeatureLocked,w=f(Object(r.useState)(""),2),g=w[0],h=w[1],_=f(Object(r.useState)(""),2),E=_[0],S=_[1],k=f(Object(r.useState)(null),2),N=k[0],C=k[1],x=f(Object(r.useState)(null!=v?v:{}),2),P=x[0],A=x[1],T=f(Object(r.useState)("new"),2),I=T[0],D=T[1],B=f(Object(r.useState)(!1),2),F=B[0],L=B[1];Object(r.useEffect)((function(){A(v)}),[v]),Object(r.useEffect)((function(){var e;S(null==N||null===(e=N.step)||void 0===e?void 0:e.name),"new"===I&&Object(a.isEmpty)(g.trim())||"existing"===I&&Object(a.isEmpty)(E)?L(!0):L(!1)}),[I,N,g,E]);var z=function(){if(!F){var t=e.errors;N&&N.copyFrom&&!N.step&&(t.copyFrom=Object(c.__)("Copy From: This field is required","funnel-builder")),0===Object(a.size)(t)?n({copyFrom:N&&N.hasOwnProperty("step")?N.step:null,title:"existing"===I?"".concat(E," Copy"):g}):A(t)}};return Object(r.createElement)(r.Fragment,null,P&&Object(a.size)(P)>0&&Object(r.createElement)(u.a,{status:"error",isDismissible:!0,onRemove:function(){return A({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(P).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},P[e])})))),j||!m||p?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){z(),e.preventDefault()}},Object(r.createElement)(s.a,{options:[{value:"new",label:Object(c.__)("Create New","funnel-builder")},{value:"existing",label:Object(c.__)("Clone Existing","funnel-builder"),isPro:y}],selected:I,onChange:function(e){D(e)},className:"bwf-add-bump_radio-items"}),"new"===I?Object(r.createElement)(l.TextControl,{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Enter Name","funnel-builder"),value:g,onChange:function(e){return h(e)}}):null,"existing"===I?Object(r.createElement)(o.a,{step:t,onStepSelected:function(e){return C(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(i.a,{className:"bwf-modal-cancel-btn",onClick:d},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(i.a,{isPrimary:!0,onClick:z,disabled:F,isBusy:j,className:F?"bwf-no-ripple":""},Object(c.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(c.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(i.a,{isPrimary:!0,onClick:function(){d(),O()}},Object(c.__)("OK","funnel-builder")))))}},316:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(1),l=n(4),o=n(7),i=n.n(o),s=n(8),u=n(13),b=n.n(u),f=n(343),d=n(80);function m(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,o=p(Object(r.useState)({default_css:"",skin_all:{}}),2),u=o[0],O=o[1],j=p(Object(r.useState)(!0),2),v=j[0],y=j[1];return Object(r.useEffect)((function(){b()({path:Object(l.p)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&O({skin_all:e.skin_all,default_css:e.default_css}),y(!1)})).catch((function(e){y(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(a.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(c.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(d.a,{isPrimary:!0,proLink:Object(l.J)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(s.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:i()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},m(new Array(8)).map((function(e,t){return Object(r.createElement)(f.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,u.default_css),Object.keys(u.skin_all).map((function(e){var t=u.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},343:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var r=n(0),a=n(281),c=n(4),l=n(2),o=n(370),i=n(7),s=n.n(i),u={image:o.a},b=function(e,t,n,c){return e.map((function(e,o){return"richeditor"===e.type&&(e.openMergeTagModal=c,e.id="richeditor-".concat(o),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:o},(Object(l.isEmpty)(e.toggler)||f(t,e.toggler,e))&&Object(r.createElement)(a.a,{input:e,formProps:n(e.key),values:t,customMapField:u}))}))},f=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else Object(c.q)(r)==Object(c.q)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},d=function(e,t){if(e.selectors&&e.stylekey&&!Object(l.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,a="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(a)):t+="".concat(r,"{").concat(a,"}")}return t},m=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(a).addClass(e.contentClass):jQuery(a).show():e.contentClass?jQuery(a).removeClass(e.contentClass):jQuery(a).hide()}break;case"select":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;e.value&&Object(l.isArray)(e.allClasses)?(jQuery(c).removeClass(e.allClasses),jQuery(c).addClass(e.value)):r=d(e,r)}break;case"color":if(e.selectors){var o=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,i="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(o,"{").concat(i,"}")}if(e.isHover&&e.hoverSelectors){var s=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,u="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(s,"{").concat(u,"}")}break;case"dimension-control":if(e.selectors){var b=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(b,"{").concat(f,"}"),r+="".concat(b,"{").concat(f,"}")}break;case"box-shadow":if(e.selectors){var m=e.value,p=m.h_offset,O=m.v_offset,j=m.blur,v=m.spread,y=m.color,w=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(l.isEmpty)(p)||Object(l.isEmpty)(O)||Object(l.isEmpty)(j)||Object(l.isEmpty)(v)||Object(l.isEmpty)(y))){var g="".concat(e.stylekey,":").concat(p,"px ").concat(O,"px ").concat(j,"px ").concat(v,"px ").concat(y,";");r+="".concat(w,"{").concat(g,"}")}}break;case"image":if(e.selectors){var h,_,E,S,k,N,C=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(l.isEmpty)(null==e||null===(h=e.value)||void 0===h?void 0:h.custom_url))if(jQuery(C+" img").length)jQuery(C+" img").attr("src",null==e||null===(k=e.value)||void 0===k?void 0:k.image_url);else jQuery(C).find("svg").remove(),jQuery(C).append('<img src="'+(null==e||null===(N=e.value)||void 0===N?void 0:N.image_url)+'" alt="order bump" />');else if(Object(l.isEmpty)(null==e||null===(_=e.value)||void 0===_?void 0:_.custom_url))jQuery(C+" img").attr("src","").attr("srcset","");else{var x,P;if(jQuery(C+" img").length)jQuery(C+" img").attr("src",null==e||null===(x=e.value)||void 0===x?void 0:x.custom_url).attr("srcset","");else jQuery(C).find("svg").remove(),jQuery(C).append('<img src="'+(null==e||null===(P=e.value)||void 0===P?void 0:P.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var A,T,I=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,D=null!==(A=null==e||null===(T=e.value)||void 0===T?void 0:T.position)&&void 0!==A?A:"left";if(null!=e&&e.alignmentClassList){var B=Object.values(null==e?void 0:e.alignmentClassList),F=null==e?void 0:e.alignmentClassList[D];jQuery(I).removeClass(B).addClass(F)}}var L=null!==(E=null==e||null===(S=e.value)||void 0===S?void 0:S.width)&&void 0!==E?E:"100";L&&(r+="".concat(C,"{max-width: ").concat(L,"px;}"))}break;default:r=d(e,r)}})),t(r)}))},p=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:s()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n})},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},358:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(1),l=n(2),o=(n(413),n(19));function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,s=e.title,u=e.updateDetail,b=e.isLoading,f=e.pageUrlSlug,d=i(Object(r.useState)(s),2),m=d[0],p=d[1],O=i(Object(r.useState)(f),2),j=O[0],v=O[1],y=i(Object(r.useState)(""),2),w=y[0],g=y[1],h=Object(l.isEmpty)(null==m?void 0:m.trim())||Object(l.isEmpty)(null==j?void 0:j.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e=null==t?void 0:t.split("/");_.current=e.slice(0,Object(l.isEmpty)(e[e.length-1])?-2:-1).join("/"),g(t)}),[t]),Object(r.createElement)(a.Modal,{title:Object(c.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(c.__)("Name","funnel-builder")),Object(r.createElement)(a.TextControl,{value:m,onChange:function(e){p(e)},className:Object(l.size)(null==m?void 0:m.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(h)return;u(m,j)}}}),Object(l.size)(null==m?void 0:m.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(c.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(a.TextControl,{value:j,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),g(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(l.size)(null==j?void 0:j.trim())?"":"bwf-error-border"}),Object(l.size)(null==j?void 0:j.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},w))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(o.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(o.a,{isPrimary:!0,onClick:function(){return u(m,j)},disabled:h,isBusy:b,className:h?"bwf-no-ripple":""},Object(c.__)("Update","funnel-builder"))))}},370:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n.n(a),l=n(2),o=n(9),i=n(51),s=n(1),u=n(243),b=(n(386),n(8));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=[{label:Object(s.__)("Product","funnel-builder"),value:"product"},{label:Object(s.__)("Custom","funnel-builder"),value:"custom"}];t.a=function e(t){var n,a=t.onChange,f=t.value,m=t.label,O=t.className,v=Object(i.useInstanceId)(e),y="inspector-bump-image-".concat(v),w=c()("components-bump-image",O),g=p(Object(r.useState)(f.type),2),h=g[0],_=g[1],E=p(Object(r.useState)(f.custom_url),2),S=E[0],k=E[1],N=function(e){a(e)},C=function(e,t){e.preventDefault(),n||(n=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=n.state().get("selection").first().toJSON();N(d(d({},f),{},{custom_url:e.url,type:"custom"})),k(e.url)})),n.open()};return Object(r.createElement)(o.BaseControl,{label:m,className:w,id:y},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(l.isEmpty)(j)&&Object(r.createElement)(o.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},j.map((function(e,t){return Object(r.createElement)(o.Button,{key:t,variant:e.value===h?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete f.custom_url,N(d(d({},f),{},{type:e.value}))):Object(l.isEmpty)(S)||N(d(d({},f),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===h?Object(r.createElement)("img",{src:null==f?void 0:f.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),N(d(d({},f),{},{type:"product",custom_url:""}))}},Object(r.createElement)(b.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:C},Object(r.createElement)(b.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:C},Object(r.createElement)(b.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(s.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(o.TextControl,{type:"number",label:Object(s.__)("Width (px)","funnel-builder"),max:400,value:null==f?void 0:f.width,onChange:function(e){N(d(d({},f),{},{width:e}))}}),Object(r.createElement)(u.b,{label:Object(s.__)("Image Position","funnel-builder"),options:[{label:Object(s.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(s.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(s.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==f?void 0:f.position,onChange:function(e){N(d(d({},f),{},{position:e}))}})))))}},386:function(e,t,n){},413:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){}}]);